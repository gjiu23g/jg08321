<!DOCTYPE html>
<html>
<head>
  <title>Dealerships</title>
</head>

<body style="background-color: #EE82EE; font-family: Arial, Helvetica, sans-serif; color: #333333;">

  <h1 style="font-size: 30px; font-weight: bold; text-align: center;">Dealerships</h1>

  <label for="filter">Filter by ID:</label>
  <input type="number" id="filter" name="filter">
  
  <button onclick="applyFilter()">Apply Filter</button>
  
  <table style="width: 80%; margin: 20px auto; border: 2px solid #CCCCCC;">
    <tr style="background-color: #999999;">
      <th style="padding: 5px; font-weight: bold;">ID</th>
      <th style="padding: 5px; font-weight: bold;">Name</th>
      <th style="padding: 5px; font-weight: bold;">Location</th>
    </tr>

    <tbody id="dealerships"></tbody>

  </table>

  <script>
    let dealerships;
    
    fetch('/api/dealerships')
      .then(response => response.json())
      .then(data => {
        dealerships = data.dealerships;
        displayDealerships();
      });

    function displayDealerships() {
      const tbody = document.getElementById('dealerships');
      tbody.innerHTML = ''; // clear existing rows
      
      dealerships.forEach(dealership => {
        const row = document.createElement('tr');

        const idCell = document.createElement('td');
        idCell.textContent = dealership.id;
        idCell.style.padding = '5px';
        row.appendChild(idCell);

        const nameCell = document.createElement('td');
        nameCell.textContent = dealership.name;
        nameCell.style.padding = '5px';
        row.appendChild(nameCell);

        const locationCell = document.createElement('td');
        locationCell.textContent = dealership.location;
        locationCell.style.padding = '5px'; 
        row.appendChild(locationCell);

        tbody.appendChild(row);
      });
    }

    function applyFilter() {
      const filterId = document.getElementById('filter').value;
      
      const filtered = dealerships.filter(d => d.id == filterId);
      displayDealerships(filtered);
    }

  </script>

</body>
</html>
